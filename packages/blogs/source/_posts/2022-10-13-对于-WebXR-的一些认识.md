---
title: 对于 WebXR 的一些认识
date: 2022-10-13 19:10:44
tags: [threejs, web, 3D]
categories: Web3D
---

最近想学习 WebXR 相关的东西，因此在这里记录一下学到的东西。

所谓 XR，即 VR，AR 和 MR，本质上就是让人得到与现实生活中一样的体验。VR 创造出一个与现实完全隔离的世界，在那个世界里，人能获得与当前这个世界一样的体验。AR 和 MR 则是在真实的世界里，加入数字化的东西，但是又给人一种“这是真实存在的”感觉。

<!--more-->

那 WebXR 则是在 web 这个平台之上，带来这种“真实体验”。那么，回到 web 的本质——渲染，实际上我们在浏览器中看到的是浏览器根据代码，渲染出来的二维的、平面的东西。即使是那些所谓的 3D 的东西，其实也只是看得像立体的，它本质上还是平面的。

那么问题来了，怎么让平面的、2D 的东西看得像 3D 的呢？答案是 3D 引擎。Three.js 就是一个 3D 引擎。

通过阅读 three.js 的文档，我了解到一些概念，理解这些概念需要与人是如何观察周围的事物进行对比。

首先是 Scene 场景。简单理解就是页面上渲染出来的内容，相对应的就是眼睛看到的东西就是场景。

然后是 Camera 相机。在某一个时刻，页面上渲染的东西是从那个角度看到的，就是由相机决定的。有一句古诗完美地说明了这一点，“横看成岭侧成峰，远近高低各不同”。站在不同的方位和高度，看到的是同一个事物不同的方面。更具体的，眼睛和物体的相对位置，决定了看到的东西是什么样子。相机就是眼睛。不过，一般不会把相机真实的渲染出来，毕竟眼睛观察到的东西里面肯定不包括眼睛自身。

最后是 Mesh 网格。网格指的是页面渲染出来的东西，其实就是眼睛观察到的物体的抽象。要在页面上渲染一个东西，至少需要两个元素，一个是这个物体，另一个是这个物体的位置。位置很简单，只要建立一个三维坐标系，世间万物我们都可以得出它的位置。类似的，网页上也可以建立三维坐标系：网页所在的平面确定了 x 轴和 y 轴，z 轴就是垂直于这个平面直线。

而怎么在网页中表示一个物体成为了关键。这就引入了后续的相关概念，Geometry 几何体和 Material 材质。先说几何体，计算机需要的是规则，任何一个物体，其形状都可以用不同的几何体组合出来，最简单的长方体可以由 8 个点表示出来，每个点可以通过三维坐标系中的坐标唯一确定。所以，在这种规则之上，可以在 Web 上渲染任何物体。

然而，很多物体的形状其实一样的，比如三角锥跟金字塔。那计算机怎么区分不同的物体呢，答案是材质。说得更直白一点，其实是颜色。真实的物体是由不同的分子组成，在宏观上表现出不同的性质，看上去就会大相径庭。而在计算机里，无非是不同的颜色。

要让一个物体是 3D 的，还有关键的一点是 Light 光照。眼睛看到的物体，其实是物体本身反射到眼睛中的光线的颜色。同一个物体，因为形状的不同，在同一个光照的条件下，不同的部位对光的反射是完全不一样的。所以，为了让渲染出来的物体更加 3D 化，那就需要在这个场景中加上光照的效果，让这个物体的不同部位呈现出不同的显示效果。

总结一下，在 web 中显示 3D 物体，就是创建出一个 Scene。然后在这个 Scene 中加入眼睛 Camera，加入用 Geometry 和 Material 组合的物体。最后加上 Light，让整个场景变得更加真实。

那么在 3D 的基础上，怎么变成 XR 呢？答案是让 Camera 变得自由可控的。人的眼睛是可以随时变化的，晃动一下脑袋，眼睛的位置随之发生变化，看到的东西也就不同了。如果 Web3D 渲染出来的物体，能够随时响应人的眼睛的变化，它就是 XR 的了。
